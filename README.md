# Docker で らくらく WordPress ローカル環境構築
## はじめに
DockerでWordpressのローカル環境を簡単に構築できるテンプレートがほしいなと思って作りました。
自由に使用していただいて構いませんが、自己責任にてお願いいたします m(_ _)m

## 使い方
### 起動
以下のコマンドを実行してください。

`docker compose up -d`

#### 初回起動時のみ必要な作業

初回起動時のみ、上記のコマンドに加えて下記の作業を行う必要があります。
wp-init.sh は初回インストール時に実行されるスクリプトです。自分のプロジェクトに合わせて編集しておきましょう。

特に7-9行目
```
wp core install --url="http://localhost:8000" --title="Title" \
	--admin_user="user" --admin_password="password" \
	--admin_email="example@example.com" --allow-root
```
こちらは適宜ユーザー名、パスワード、メールアドレスを設定しておきましょう。

その後、下記のコマンドを実行してください。

`make init`

上記のコマンドにより、 wp-init.sh がDockerコンテナにコピーされ実行されます。

※まれに上記のコマンドでエラーが発生することがあります。それはDockerコンテナが完全に起動していない状態でコマンドを実行したためです。その場合、時間を置いて（10秒ぐらい）もう一度コマンドを実行するとうまくいきます。

**初回起動時のみ必要な作業　終わり**

その後、 http://localhost:8000 にアクセスしてみてください。WordPressサイトが起動していると思います。
また、docsディレクトリが作成され、その中にWordPressのファイルが入ります。

### 終了
以下のコマンドを実行してください。

`docker compose down`

### .gitignore の設定

このリポジトリでは、WordPressの余計なファイルをgitで管理しないように .gitignore を設定しています。なお、独自テーマをgitで管理したいこともあると思います。それで、 .gitignore の最終行を編集することで、独自テーマを簡単にgitで管理できるようにしています。

.gitignore の最終行

`!/docs/wp-content/themes/your_theme`

こちらの、 "your_theme" の部分を、独自テーマのディレクトリ名に変更すればOKです。

### 削除（リセット）
以下のコマンドを実行してください（コンテナ起動中に実行することを想定していますが、終了状態で実行しても動きます）。

`make destroy`

**上記コマンドを実行すると、WordPressのファイルやDBがすべて削除されます。ご注意ください。**
